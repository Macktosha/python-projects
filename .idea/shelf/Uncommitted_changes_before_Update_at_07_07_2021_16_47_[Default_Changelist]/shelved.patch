Index: j_bot_main.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import telebot, lyricsgenius, spotipy, YouTubeMusicAPI\r\nfrom spotipy.oauth2 import SpotifyClientCredentials\r\nfrom youtubepy import Video\r\nimport sqlite3\r\nfrom yandex_music import Client\r\nimport vk_audio\r\nfrom telebot import types\r\n\r\n\r\nvk = vk_audio.VkAudio(login='+7(969) 969-5412', password='omopur97')  # ВК авторизация\r\nclient = Client()  # Клиент Яндекс.Музыки\r\nbot = telebot.TeleBot('1763338570:AAH-6CSF7YSeBRu43b-rey2cHFwiYGeXC9I')  # API бота\r\ngenius = lyricsgenius.Genius('9bDm8DpQlsRIZ7TKG76or_AuR_Y0Fkx1g5tjL5tzmG0lgKaSTF6iOT8cjVpL65Qn')  # Api Genius\r\nspotify = spotipy.Spotify(  # API Spotify\r\n    auth_manager=SpotifyClientCredentials(\"614ac917f8fc4ac1b5d9ad1d4732b757\", \"805b79bb63d44b779e6052e0df2a5efa\"))\r\n\r\n\r\n# транслитерация\r\ndef transliterate(name):\r\n    # Словарь с заменами\r\n    dicktionary = {'а': 'a', 'б': 'b', 'в': 'v', 'г': 'g', 'д': 'd', 'е': 'e', 'ё': 'e', 'ж': 'zh',\r\n                   'з': 'z', 'и': 'i', 'й': 'i', 'к': 'k', 'л': 'l', 'м': 'm', 'н': 'n', 'о': 'o',\r\n                   'п': 'p', 'р': 'r', 'с': 's', 'т': 't', 'у': 'u', 'ф': 'f', 'х': 'h', 'ц': 'c',\r\n                   'ч': 'ch', 'ш': 'sh', 'щ': 'sch', 'ъ': '', 'ы': 'i', 'ь': '', 'э': 'e', 'ю': 'u',\r\n                   'я': 'ya', 'a': 'a', 'b': 'b', 'c': 'c', 'd': 'd', 'e': 'e', 'f': 'f', 'g': 'g', 'h': 'h',\r\n                   'i': 'i', 'j': 'j', 'k': 'k', 'l': 'l', 'm': 'm', 'n': 'n', 'o': 'o', 'p': 'p',\r\n                   'q': 'q', 'r': 'r', 's': 's', 't': 't', 'u': 'u', 'v': 'v', 'w': 'w', 'x': 'x',\r\n                   'y': 'y', 'z': 'z', ',': '', '?': '', ' ': ' ', '~': '', '!': '', '@': '', '#': '', 'Є': 'e', '—': '',\r\n                   '$': '', '%': '', '^': '', '&': '', '*': '', '(': '', ')': '', '-': '', '=': '', '+': '',\r\n                   ':': '', ';': '', '<': '', '>': '', '\\'': '', '\"': '', '\\\\': '', '/': '', '№': '',\r\n                   '[': '', ']': '', '{': '', '}': '', 'ґ': '', 'ї': '', 'є': '', 'Ґ': 'g', 'Ї': 'i', }\r\n    # Циклически заменяем все буквы в строке\r\n    for key in dicktionary:\r\n        name = name.replace(key, dicktionary[key])\r\n    return name\r\n\r\n\r\n# Функция, задающая песню\r\ndef setSong(message):\r\n    global my_track  # название песни\r\n    my_track = message.text.lower()\r\n    init_keyboard(message)\r\n\r\n\r\n# Инициализация клаиатуры с действиями\r\ndef init_keyboard(message):\r\n    keyboard = telebot.types.InlineKeyboardMarkup()\r\n    song_button = telebot.types.InlineKeyboardButton(text='Найти песню', callback_data='find_song')\r\n    keyboard.add(song_button)\r\n    video_button = telebot.types.InlineKeyboardButton(text='Найти клип', callback_data='find_video')\r\n    keyboard.add(video_button)\r\n    text_button = telebot.types.InlineKeyboardButton(text='Найти текст песни', callback_data='find_text')\r\n    keyboard.add(text_button)\r\n    bot.send_message(message.chat.id, text='Выбери действие', reply_markup=keyboard)\r\n\r\n\r\n# Функция задающая автора\r\ndef setAuthor(message):\r\n    global my_author  # автор песни\r\n    my_author = message.text.lower()\r\n    bot.send_message(message.chat.id, \"Введи название композиции\")\r\n    bot.register_next_step_handler(message, setSong)\r\n\r\n\r\n# Обработка команды /start\r\n@bot.message_handler(commands=['start'])\r\ndef get_text_messages(message):\r\n    global user_id\r\n    user_id = message.from_user.id\r\n    bot.send_message(message.chat.id, 'Добро пожаловать, {0.first_name}!\\nЯ - {1.first_name},'\r\n                                      ' бот созданный для помощи с музыкой.'.format(message.from_user, bot.get_me()), )\r\n    bot.send_message(message.chat.id, \"Введи автора композиции\")\r\n    bot.register_next_step_handler(message, setAuthor)\r\n\r\n\r\n@bot.message_handler(commands=['developers'])\r\ndef developers_info(message):\r\n    bot.send_message(message.chat.id, \"Разработчики:\\nАнтон Короткин @WindInMyHead\\nАнтон Макотра @macktosha\\nНикита Клейменов @gloomy_tenzor\\nПо всем вопросам и предложениям обращаться и не стесняться!\")\r\n\r\n\r\n #Поиск ссылки на Spotify\r\ndef url_spotify(searchQuery):\r\n    songs = spotify.search(q=searchQuery, limit=1)\r\n    print(' ')\r\n    return songs['tracks']['items'][0]['external_urls']['spotify']\r\n\r\n\r\n# Поиск обложки на Spotify\r\ndef image_spotify(searchQuery):\r\n    image = spotify.search(q=searchQuery, limit=1)\r\n    return image['tracks']['items'][0]\r\n\r\n\r\n# Поиск ссылки на Яндекс Музыке\r\ndef url_yandex(searchQuery):\r\n    search_result = client.search(searchQuery)\r\n    result = \"https://music.yandex.ru/album/\" + str(search_result.tracks.results[0].albums[0].id) +\\\r\n             \"/track/\" + str(search_result.tracks.results[0].id)\r\n    return result\r\n\r\n\r\n# Поиск ссылки на ВК\r\ndef url_vk(searchQuery):\r\n    search_result = vk.search(searchQuery)\r\n    result = \"https://vk.com/music/album/\" + str(search_result.Audios[00].Album.owner_id) + \"_\" + \\\r\n             str(search_result.Audios[00].Album.id) + \"_\" + \\\r\n            str(search_result.Audios[00].Album.access_hash)\r\n    return result\r\n\r\n\r\n# Поиск ссылки на YouTube Music\r\ndef url_youtube(searchQuery):\r\n    result = YouTubeMusicAPI.getsonginfo(searchQuery)\r\n    return result['track_url']\r\n\r\n\r\n# Поиск ссылки на Apple Music\r\ndef url_apple(searchQuery):\r\n    return searchQuery\r\n\r\n\r\n# КНОПКА ПОИСК ПЕСНИ\r\n@bot.callback_query_handler(func=lambda call: call.data.startswith('find_song'))\r\ndef url_keyboard(call):\r\n    searchQuery = my_track + ' ' + my_author  # Запрос в совмещенном виде\r\n    searchQuery = transliterate(searchQuery)\r\n    markup = types.InlineKeyboardMarkup(row_width=2)\r\n    item1 = types.InlineKeyboardButton(text='Spotify', url=url_spotify(searchQuery))\r\n    item2 = types.InlineKeyboardButton(text='Яндекс.Музыка', url=url_yandex(searchQuery))\r\n    item3 = types.InlineKeyboardButton(text='Вконтакте', url=url_vk(searchQuery))\r\n    item4 = types.InlineKeyboardButton(text='YouTube Music', url=url_youtube(searchQuery))\r\n    item5 = types.InlineKeyboardButton(text='Apple Music', url='https://www.google.com')\r\n    markup.add(item1, item2, item3, item4, item5)\r\n    image = image_spotify(searchQuery)\r\n    bot.send_photo(call.message.chat.id, image['album']['images'][0]['url'],\r\n                   caption=f\"Исполнитель: {image['artists'][0]['name']}\\n\"\r\n                           f\"Трек: {image['name']} \\n\"\r\n                           f\"Альбом: {image['album']['name']} \\n\"\r\n                           f\"Дата релиза: {image['album']['release_date']} \", reply_markup=markup)\r\n    init_keyboard(call.message)\r\n\r\n\r\n# КНОПКА ПОИСК ВИДЕО\r\n@bot.callback_query_handler(func=lambda call: call.data.startswith('find_video'))\r\ndef button_video(call):\r\n    bot.send_message(call.message.chat.id, \"Идет поиск клипа \" + my_author + \"-\" + my_track)\r\n    search_res = my_author + ' ' + my_track\r\n    search_res = transliterate(search_res)\r\n    clip_search = Video(search_res)\r\n    result = clip_search.search()\r\n    bot.send_message(call.message.chat.id, result)\r\n    init_keyboard(call.message)\r\n\r\n\r\n# КНОПКА ПОИСК ТЕСКТА\r\n@bot.callback_query_handler(func=lambda call: call.data.startswith('find_text'))\r\ndef button_text(call):\r\n    bot.send_message(call.message.chat.id, \"Идет поиск текста \" + my_author + \"-\" + my_track)\r\n    artist = genius.search_artist(my_author, 0)\r\n    song = artist.song(my_track)\r\n    parts = [song.lyrics[i:i + 4096]\r\n             for i in range(0, len(song.lyrics), 4096)]\r\n    for part in parts:  # если строка длиннее 4096\r\n        bot.send_message(call.message.chat.id, part)\r\n    init_keyboard(call.message)\r\n\r\n\r\nbot.polling()\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/j_bot_main.py b/j_bot_main.py
--- a/j_bot_main.py	(revision 0e0f9367d4de09053bab4b5fd7831d93b4a7abd5)
+++ b/j_bot_main.py	(date 1625665663529)
@@ -6,7 +6,7 @@
 import vk_audio
 from telebot import types
 
-
+#токены
 vk = vk_audio.VkAudio(login='+7(969) 969-5412', password='omopur97')  # ВК авторизация
 client = Client()  # Клиент Яндекс.Музыки
 bot = telebot.TeleBot('1763338570:AAH-6CSF7YSeBRu43b-rey2cHFwiYGeXC9I')  # API бота
